{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Hardhat Enterprises - Search Results</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}/">
    <meta property="og:title" content="Hardhat Enterprises">
    <meta property="og:image" content="{% static 'assets/img/pages/home/hero-image.svg' %}">
    <link rel="apple-touch-icon" href="{% static 'assets/img/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" href="{% static 'assets/img/favicon/favicon-32x32.png' %}">
    <link rel="stylesheet" href="{% static 'vendor/@fortawesome/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/hardhat.css' %}?v=2">
</head>
<body>

{% block header %}
    {% include 'includes/navigation.html' %}
{% endblock header %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-6 col-12 mx-md-auto mx-3 mt-7 mb-5">

      <!-- Filter button -->
      <div class="mb-3 text-start">
        <button id="filterBtn" class="btn btn-outline-secondary">
          <i class="fas fa-filter"></i> Filters
        </button>
      </div>
      
      <!-- Filter panel -->
      <div id="filterPanel" class="card p-3 mb-4" style="display:none;">
        <form id="filter-form" method="GET" action="">
          
          <input type="hidden" name="q" value="{{ searched }}">
      
          <!-- Sort options -->
          <div class="mb-2">
            <label><strong>Sort By:</strong></label>
            <select name="sort" class="form-select">
              <option value="">Relevance</option>
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
            </select>
          </div>

          <br>
      
          <!-- Date range -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="start_date">Start Date:</label>
              <input type="date" class="form-control" id="start_date" name="start_date">
            </div>
            
            <div class="col-md-6">
              <label for="end_date">End Date:</label>
              <input type="date" class="form-control" id="end_date" name="end_date">
            </div>
          </div>

          <br>
      
          <!-- Type filter -->
          <div class="mb-2">
            <label><input type="checkbox" name="type" value="projects"> Projects</label><br>
            <label><input type="checkbox" name="type" value="articles"> Articles</label><br>
            <label><input type="checkbox" name="type" value="users"> Users</label><br>
            <label><input type="checkbox" name="type" value="courses"> Courses</label><br>
            <label><input type="checkbox" name="type" value="skills"> Skills</label><br>
            <label><input type="checkbox" name="type" value="students"> Students</label><br>
            <label><input type="checkbox" name="type" value="contacts"> Contacts</label><br>
            <label><input type="checkbox" name="type" value="webpages"> Webpages</label><br>
          </div>

          <br>
      
          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-secondary w-50 me-2" id="reset-filters">Reset</button>
            <button type="submit" class="btn btn-primary w-50">Apply</button>
          </div>

        </form>
      </div>
      
      <!--  Script to toggle filter panel -->
      <script>
      document.getElementById("filterBtn").onclick = function(){
        let panel = document.getElementById("filterPanel");
        panel.style.display = (panel.style.display === "none") ? "block" : "none";
      };
      </script>
      
      <!-- Script to reset filters -->
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const resetBtn = document.getElementById("reset-filters");
          const filterForm = document.getElementById("filter-form");
      
          resetBtn.addEventListener("click", function() {
            filterForm.reset();
            document.getElementById("start_date").value = "";
            document.getElementById("end_date").value = "";
          });
        });
      </script>

      <h1 class="fw-bolder">Search Results</h1>

      {% if searched %}
        <h5>You Searched For: "{{ searched }}"</h5>
      {% endif %}

      <!-- Suggestion feature -->
      {% if suggestion %} 
        <div class="alert alert-light mt-2"> 
          Did you mean: 
          {% for word in suggestion %}
            <a href="?q={{ word }}">{{ word }}</a>{% if not forloop.last %}, {% endif %}
          {% endfor %}
          ? 
        </div> 
      {% endif %}

    </div>

    {% if projects %}
    <section id="projects" class="section section-lg bg-white">
      <div class="container">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center">
          {% for project in projects %}
            {% if project.title == 'AppAttack' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/appattack-card.svg' %}" class="card-img-top" alt="AppAttack">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">AppAttack</h3>
                  <p class="mt-3">We deliver comprehensive reports to clients, providing actionable insights to enhance code security.</p>
                  <a href="{% url 'appattack' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% elif project.title == 'PT-GUI' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/pt-gui-card-2.svg' %}" class="card-img-top" alt="PT-GUI">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">PT-GUI</h3>
                  <p class="mt-3">Introducing the Deakin Detonator Toolkit (DDT) â€“ the cutting-edge arsenal for modern penetration testers.</p>
                  <a href="{% url 'ptgui_viz_main' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% elif project.title == 'Deakin_CyberSafe_VR' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/cards/icon1.svg' %}" class="card-img-top" alt="CyberSafe VR">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">CyberSafe VR</h3>
                  <p class="mt-3">VR-based training for small businesses to blend cybersecurity theory with practice.</p>
                  <a href="{% url 'Vr_main' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% elif project.title == 'Smishing_Detection' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/cards/icon2.svg' %}" class="card-img-top" alt="Smishing Detection">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">Smishing Detection</h3>
                  <p class="mt-3">Aims to develop a mobile app to detect SMS phishing (smishing) threats in real time.</p>
                  <a href="{% url 'smishing_detection_main' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% elif project.title == 'Deakin_Threat_Mirror' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/cards/icon8.svg' %}" class="card-img-top" alt="Threat Mirror">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">Threat Mirror (Paused)</h3>
                  <p class="mt-3">Explores threat intelligence platform options for SMEs in developing economies.</p>
                  <a href="{% url 'Deakin_Threat_mirror_main' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% elif project.title == 'Malware' %}
            <div class="col">
              <div class="card border-0 overflow-hidden h-100">
                <div class="position-relative">
                  <img src="{% static 'assets/img/pages/home/threat-intel-card.svg' %}" class="card-img-top" alt="Malware">
                </div>
                <div class="card-body position-relative mt-3 mx-2 bg-white border border-gray-300 text-center rounded d-flex flex-column">
                  <h3 class="h5 card-title">Malware Visualization</h3>
                  <p class="mt-3">A visual analytics tool to simplify malware investigation.</p>
                  <a href="{% url 'malware_viz_main' %}"><div class="btn btn-secondary mt-auto">Learn More</div></a>
                </div>
              </div>
            </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </section>
    {% endif %}

    {% if users %}
    <div class="col-12">
      <h2>Users</h2>
      <ul>
        {% for user in users %}
        <li>{{ user.first_name }} {{ user.last_name }} ({{ user.email }})</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if courses %}
    <div class="col-12">
      <h2>Courses</h2>
      <ul>
        {% for course in courses %}
        <li><h5>{{ course.title }} ({{ course.code }})</h5></li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if skills %}
    <div class="col-12">
      <h2>Skills</h2>
      <ul>
        {% for skill in skills %}
        <li>{{ skill.name }} - {{ skill.description }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if students %}
    <div class="col-12">
      <h2>Students</h2>
      <ul>
        {% for student in students %}
        <li>{{ student.user.get_full_name }} ({{ student.user.email }})</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if contacts %}
    <div class="col-12">
      <h2>Contacts</h2>
      <ul>
        {% for contact in contacts %}
        <li>{{ contact.name }} - {{ contact.email }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if articles %}
    <div class="col-12">
      <h2>Articles</h2>
      <ul>
        {% for article in articles %}
        <li><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    {% if not webpages and not users and not projects and not courses and not skills and not students and not contacts and not articles %}
    <div class="col-12">
      <h2>No results found for "{{ searched }}"</h2>
    </div>
    {% endif %}
  </div>
</div>
{% endblock content %}

{% block footer %}
  {% include 'includes/footer.html' %}
{% endblock footer %}

{% include 'includes/scripts.html' %}
{% block javascripts %}{% endblock javascripts %}
</body>
</html>
